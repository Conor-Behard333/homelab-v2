kind: ZarfPackageConfig
metadata:
  name: external-dns
  description: deploy external-dns
    
components:
  - name: external-dns-pihole
    required: true
    charts:
      - name: external-dns
        namespace: external-dns-pihole
        version: 1.18.0
        url: https://kubernetes-sigs.github.io/external-dns/
        valuesFiles:
          - "../../src/external-dns/values/values-pihole.yaml"

  - name: external-dns-unifi
    required: true
    charts:
      - name: external-dns
        namespace: external-dns-unifi
        version: 1.18.0
        url: https://kubernetes-sigs.github.io/external-dns/
        valuesFiles:
          - "../../src/external-dns/values/values-unifi.yaml"
  
  - name: external-dns-unifi-ireland
    required: true
    charts:
      - name: external-dns
        namespace: external-dns-unifi-ireland
        version: 1.18.0
        url: https://kubernetes-sigs.github.io/external-dns/
        valuesFiles:
          - "../../src/external-dns/values/values-unifi-ireland.yaml"
  
  
#  - name: external-dns-config
#    required: true
#    manifests:
#     - name: external-dns-config
#       namespace: external-dns
#       files:
#           - ../../src/external-dns/manifests/ingress.yaml
#           - ../../src/external-dns/manifests/cert.yaml
# create a secret 
#kubectl create secret generic pihole-password -n external-dns --from-literal EXTERNAL_DNS_PIHOLE_PASSWORD=""
#kubectl create secret generic external-dns-unifi-secret -n external-dns-unifi-ireland --from-literal api-key="JXDoO6B-rVeEyS08jorvbcKGkRhfKGZJ"